<div class="registration-container">
    <h2>Create Your Account</h2>
    
    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" *ngIf="!successMessage">
      <!-- First Name -->
      <div class="form-group">
        <label for="firstName">First Name</label>
        <input 
          type="text" 
          id="firstName" 
          formControlName="firstName"
          [class.is-invalid]="f['firstName'].touched && f['firstName'].invalid"
        >
        <div *ngIf="f['firstName'].touched && f['firstName'].invalid" class="invalid-feedback">
          <div *ngIf="f['firstName'].errors?.['required']">First name is required</div>
          <div *ngIf="f['firstName'].errors?.['minlength']">
            First name must be at least 2 characters
          </div>
        </div>
      </div>
  
      <!-- Last Name -->
      <div class="form-group">
        <label for="lastName">Last Name</label>
        <input 
          type="text" 
          id="lastName" 
          formControlName="lastName"
          [class.is-invalid]="f['lastName'].touched && f['lastName'].invalid"
        >
        <div *ngIf="f['lastName'].touched && f['lastName'].invalid" class="invalid-feedback">
          <div *ngIf="f['lastName'].errors?.['required']">Last name is required</div>
          <div *ngIf="f['lastName'].errors?.['minlength']">
            Last name must be at least 2 characters
          </div>
        </div>
      </div>
  
      <!-- Email -->
      <div class="form-group">
        <label for="email">Email</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email"
          [class.is-invalid]="f['email'].touched && f['email'].invalid"
        >
        <div *ngIf="f['email'].touched && f['email'].invalid" class="invalid-feedback">
          <div *ngIf="f['email'].errors?.['required']">Email is required</div>
          <div *ngIf="f['email'].errors?.['email']">Please enter a valid email</div>
        </div>
      </div>
  
      <!-- Username -->
      <div class="form-group">
        <label for="username">Username</label>
        <input 
          type="text" 
          id="username" 
          formControlName="username"
          [class.is-invalid]="f['username'].touched && f['username'].invalid"
        >
        <div *ngIf="f['username'].touched && f['username'].invalid" class="invalid-feedback">
          <div *ngIf="f['username'].errors?.['required']">Username is required</div>
          <div *ngIf="f['username'].errors?.['minlength']">
            Username must be at least 4 characters
          </div>
        </div>
      </div>
  
      <!-- Password -->
      <div class="form-group">
        <label for="password">Password</label>
        <input 
          type="password" 
          id="password" 
          formControlName="password"
          [class.is-invalid]="f['password'].touched && f['password'].invalid"
        >
        <div *ngIf="f['password'].touched && f['password'].invalid" class="invalid-feedback">
          <div *ngIf="f['password'].errors?.['required']">Password is required</div>
          <div *ngIf="f['password'].errors?.['minlength']">
            Password must be at least 8 characters
          </div>
          <div *ngIf="f['password'].errors?.['pattern']">
            Password must contain at least one uppercase letter, one lowercase letter, one number, and one special character
          </div>
        </div>
        <small class="form-text text-muted">
          Password must be at least 8 characters and contain at least one uppercase letter, one lowercase letter, one number, and one special character.
        </small>
      </div>
  
      <!-- Confirm Password -->
      <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <input 
          type="password" 
          id="confirmPassword" 
          formControlName="confirmPassword"
          [class.is-invalid]="(f['confirmPassword'].touched && f['confirmPassword'].invalid) || registrationForm.errors?.['mismatch']"
        >
        <div *ngIf="(f['confirmPassword'].touched && f['confirmPassword'].invalid) || registrationForm.errors?.['mismatch']" class="invalid-feedback">
          <div *ngIf="f['confirmPassword'].errors?.['required']">Please confirm your password</div>
          <div *ngIf="registrationForm.errors?.['mismatch'] && f['confirmPassword'].touched">
            Passwords do not match
          </div>
        </div>
      </div>

      <!-- Role Selection
    <div class="form-group">
        <label for="role">Account Type</label>
        <select 
          id="role" 
          formControlName="role"
          class="form-control"
          [class.is-invalid]="f['role'].touched && f['role'].invalid"
        >
          <option *ngFor="let role of roles" [value]="role">{{role}}</option>
        </select>
        <div *ngIf="f['role'].touched && f['role'].invalid" class="invalid-feedback">
          Please select a role
        </div>
    </div> -->
  
      <!-- Error Message -->
      <div *ngIf="errorMessage" class="alert alert-danger">
        {{ errorMessage }}
      </div>
  
      <!-- Submit Button -->
      <button 
        type="submit" 
        class="btn btn-primary" 
        [disabled]="registrationForm.invalid || isLoading"
      >
        <span *ngIf="!isLoading">Register</span>
        <span *ngIf="isLoading">Registering...</span>
      </button>
  
      <div class="login-link">
        Already have an account? <a hre="/login">Login here</a>
      </div>
    </form>
  
    <!-- Success Message -->
    <div *ngIf="successMessage" class="alert alert-success">
      {{ successMessage }}
    </div>
  </div>